<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="robots" content="noindex, nofollow">
  
  <title>Admin Dashboard - An Immigrant's Story</title>
  
  <!-- Stylesheets -->
  <link rel="stylesheet" href="src/css/main.css">
  <link rel="stylesheet" href="src/css/typography.css">
  <link rel="stylesheet" href="src/css/layout.css">
  <link rel="stylesheet" href="src/css/components.css">
  
  <style>
    /* Admin-specific styles */
    .admin-container {
      max-width: 1200px;
      margin: 0 auto;
      padding: var(--spacing-2xl) var(--spacing-md);
    }

    .admin-header {
      text-align: center;
      margin-bottom: var(--spacing-3xl);
    }

    .admin-header h1 {
      color: var(--color-primary);
      margin-bottom: var(--spacing-sm);
    }

    .admin-login,
    .admin-dashboard {
      display: none;
    }

    .admin-login.visible,
    .admin-dashboard.visible {
      display: block;
    }

    .login-card {
      max-width: 400px;
      margin: var(--spacing-3xl) auto;
      padding: var(--spacing-2xl);
      background: white;
      border-radius: var(--radius-lg);
      box-shadow: var(--shadow-lg);
    }

    .login-card h2 {
      text-align: center;
      margin-bottom: var(--spacing-xl);
      color: var(--color-primary);
    }

    .login-error {
      display: none;
      padding: var(--spacing-md);
      margin-bottom: var(--spacing-md);
      background-color: #fde8e8;
      border: 1px solid var(--color-error);
      border-radius: var(--radius-md);
      color: var(--color-error);
      text-align: center;
    }

    .login-error.visible {
      display: block;
    }

    .dashboard-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: var(--spacing-2xl);
      padding-bottom: var(--spacing-lg);
      border-bottom: 2px solid var(--color-border);
    }

    .dashboard-actions {
      display: flex;
      gap: var(--spacing-sm);
    }

    .dashboard-section {
      margin-bottom: var(--spacing-3xl);
    }

    .dashboard-section h2 {
      font-size: var(--font-size-2xl);
      margin-bottom: var(--spacing-lg);
      color: var(--color-primary);
    }

    .stats-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: var(--spacing-lg);
      margin-bottom: var(--spacing-2xl);
    }

    .chapter-stats-list {
      display: flex;
      flex-direction: column;
      gap: var(--spacing-sm);
    }
  </style>
</head>
<body>
  <a href="#main-content" class="skip-to-content">Skip to main content</a>

  <!-- Header -->
  <header class="site-header">
    <div class="container">
      <a href="index.html" class="site-title">An Immigrant's Story - Admin</a>
    </div>
  </header>

  <!-- Main Content -->
  <main id="main-content" class="admin-container">
    <!-- Login Section -->
    <section id="admin-login" class="admin-login">
      <div class="login-card">
        <h2>Admin Login</h2>
        <div id="login-error" class="login-error" role="alert">
          <!-- Error messages will appear here -->
        </div>
        <form id="admin-login-form">
          <div class="form-group">
            <label for="admin-code" class="form-label">Security Code</label>
            <input 
              type="password" 
              id="admin-code" 
              class="form-input" 
              placeholder="Enter security code"
              required
              autocomplete="off"
              autofocus
            >
          </div>
          <button type="submit" class="btn btn-primary" style="width: 100%;">
            Access Dashboard
          </button>
        </form>
        <p class="text-center mt-4 text-muted">
          <a href="index.html">‚Üê Back to Home</a>
        </p>
      </div>
    </section>

    <!-- Dashboard Section -->
    <section id="admin-dashboard" class="admin-dashboard">
      <!-- Dashboard Header -->
      <div class="dashboard-header">
        <h1>Analytics Dashboard</h1>
        <div class="dashboard-actions">
          <button id="refresh-btn" class="btn btn-secondary btn-sm">Refresh</button>
          <button id="export-btn" class="btn btn-outline btn-sm">Export Data</button>
          <button id="import-btn" class="btn btn-outline btn-sm">Import Data</button>
          <button id="logout-btn" class="btn btn-secondary btn-sm">Logout</button>
        </div>
      </div>

      <!-- Summary Statistics -->
      <div class="dashboard-section">
        <h2>Summary Statistics</h2>
        <div id="summary-stats" class="stats-grid">
          <!-- Stats will be generated by JavaScript -->
        </div>
      </div>

      <!-- Most Viewed Chapters -->
      <div class="dashboard-section">
        <h2>Most Viewed Chapters</h2>
        <div id="most-viewed-list" class="chapter-stats-list">
          <!-- Most viewed chapters will be listed here -->
        </div>
      </div>

      <!-- Recently Viewed -->
      <div class="dashboard-section">
        <h2>Recently Viewed</h2>
        <div id="recently-viewed-list" class="chapter-stats-list">
          <!-- Recently viewed chapters will be listed here -->
        </div>
      </div>

      <!-- All Chapters Table -->
      <div class="dashboard-section">
        <h2>All Chapters</h2>
        <div id="all-chapters-table">
          <!-- Table will be generated by JavaScript -->
        </div>
      </div>

      <!-- Danger Zone -->
      <div class="dashboard-section">
        <h2 style="color: var(--color-error);">Danger Zone</h2>
        <button id="reset-analytics-btn" class="btn btn-outline btn-sm" style="border-color: var(--color-error); color: var(--color-error);">
          Reset All Analytics Data
        </button>
        <p class="text-muted mt-2" style="font-size: var(--font-size-sm);">
          This action cannot be undone. All view statistics will be permanently deleted.
        </p>
      </div>
    </section>
  </main>

  <!-- Footer -->
  <footer class="site-footer">
    <div class="container">
      <p>&copy; 2025 Dick Griola. All rights reserved.</p>
    </div>
  </footer>

  <!-- JavaScript Module -->
  <script type="module" src="src/js/admin.js"></script>
</body>
</html>
